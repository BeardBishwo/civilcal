[
  {
    "projectId": "e9b8c1d4-8486-4081-b002-5e34e0368c33",
    "testId": "a843797e-2bad-4c03-a94f-5dfc4b8614a6",
    "userId": "e47874b8-4021-7063-d8d0-6532447644d8",
    "title": "TC001-test_authentication_api_login_endpoint",
    "description": "Verify that the /api/login endpoint authenticates users correctly with valid username/email and password, returns 200 on success, 400 for missing credentials, and 401 for invalid credentials.",
    "code": "import requests\nfrom requests.auth import HTTPBasicAuth\n\nBASE_URL = \"http://localhost/bishwo_calculator\"\nLOGIN_ENDPOINT = f\"{BASE_URL}/api/login\"\nTIMEOUT = 30\n\nAUTH_USERNAME = \"uniquebishwo@gmail.com\"\nAUTH_PASSWORD = \"c9PU7XAsAADYk_A\"\n\ndef test_authentication_api_login_endpoint():\n    headers = {\n        \"Content-Type\": \"application/json\"\n    }\n\n    # 1. Test successful login with valid username and password\n    payload_valid_username = {\n        \"username\": AUTH_USERNAME,\n        \"password\": AUTH_PASSWORD\n    }\n    try:\n        response = requests.post(LOGIN_ENDPOINT, json=payload_valid_username, headers=headers, timeout=TIMEOUT)\n        assert response.status_code == 200, f\"Expected 200 for valid username login, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed during valid username login: {e}\"\n\n    # 2. Test successful login with valid email and password\n    payload_valid_email = {\n        \"email\": AUTH_USERNAME,\n        \"password\": AUTH_PASSWORD\n    }\n    try:\n        response = requests.post(LOGIN_ENDPOINT, json=payload_valid_email, headers=headers, timeout=TIMEOUT)\n        assert response.status_code == 200, f\"Expected 200 for valid email login, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed during valid email login: {e}\"\n\n    # 3. Test missing credentials (empty payload)\n    payload_missing = {}\n    try:\n        response = requests.post(LOGIN_ENDPOINT, json=payload_missing, headers=headers, timeout=TIMEOUT)\n        # Expecting 400 Bad Request for missing credentials\n        assert response.status_code == 400, f\"Expected 400 for missing credentials, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed during missing credentials test: {e}\"\n\n    # 4. Test invalid credentials (wrong password)\n    payload_invalid_password = {\n        \"username\": AUTH_USERNAME,\n        \"password\": \"invalidpassword123\"\n    }\n    try:\n        response = requests.post(LOGIN_ENDPOINT, json=payload_invalid_password, headers=headers, timeout=TIMEOUT)\n        # Expecting 401 Unauthorized for invalid credentials\n        assert response.status_code == 401, f\"Expected 401 for invalid password, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed during invalid password test: {e}\"\n\n    # 5. Test invalid credentials (wrong username)\n    payload_invalid_username = {\n        \"username\": \"nonexistentuser@example.com\",\n        \"password\": AUTH_PASSWORD\n    }\n    try:\n        response = requests.post(LOGIN_ENDPOINT, json=payload_invalid_username, headers=headers, timeout=TIMEOUT)\n        # Expecting 401 Unauthorized for invalid username\n        assert response.status_code == 401, f\"Expected 401 for invalid username, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed during invalid username test: {e}\"\n\ntest_authentication_api_login_endpoint()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-20T04:21:42.914Z",
    "modified": "2025-11-20T04:22:11.044Z"
  },
  {
    "projectId": "e9b8c1d4-8486-4081-b002-5e34e0368c33",
    "testId": "d931626c-7836-489c-af94-63e5210a68a2",
    "userId": "e47874b8-4021-7063-d8d0-6532447644d8",
    "title": "TC002-test_authentication_api_register_endpoint",
    "description": "Verify that the /api/register endpoint creates a new user with required fields, returns 200 on successful registration, 400 on validation failure, and 500 on server error.",
    "code": "import requests\nimport uuid\nfrom requests.auth import HTTPBasicAuth\n\nBASE_URL = \"http://localhost/bishwo_calculator\"\nTIMEOUT = 30\nAUTH = HTTPBasicAuth(\"uniquebishwo@gmail.com\", \"c9PU7XAsAADYk_A\")\nREGISTER_ENDPOINT = f\"{BASE_URL}/api/register\"\n\n\ndef test_authentication_api_register_endpoint():\n    # Generate unique suffix to avoid conflicts\n    unique_suffix = str(uuid.uuid4())[:8]\n    valid_payload = {\n        \"username\": f\"testuser_{unique_suffix}\",\n        \"email\": f\"testuser_{unique_suffix}@example.com\",\n        \"password\": \"StrongPassword123!\",\n        \"full_name\": \"Test User\",\n        \"engineer_roles\": [\"civil\", \"structural\"]\n    }\n\n    # Helper function to make POST request to register endpoint\n    def post_register(payload):\n        headers = {\"Content-Type\": \"application/json\"}\n        response = requests.post(\n            REGISTER_ENDPOINT,\n            json=payload,\n            headers=headers,\n            auth=AUTH,\n            timeout=TIMEOUT,\n        )\n        return response\n\n    # 1. Test successful registration (Expect 200)\n    response = post_register(valid_payload)\n    assert response.status_code == 200, f\"Expected 200, got {response.status_code}\"\n    # Optionally verify minimal content\n    try:\n        json_resp = response.json()\n    except Exception:\n        json_resp = None  # Registration success may or may not return json\n\n    # 2. Test validation failure (missing required fields) (Expect 400)\n    invalid_payload = valid_payload.copy()\n    invalid_payload.pop(\"email\")  # Remove required field to cause validation failure\n    response = post_register(invalid_payload)\n    assert response.status_code == 400, f\"Expected 400 for validation failure, got {response.status_code}\"\n\n    # 3. Simulate server error (500)\n    # Since it may be difficult to simulate a real 500 without internal server control,\n    # try sending invalid JSON or something unexpected that might cause 500\n    headers = {\"Content-Type\": \"application/json\"}\n    # Here we forcibly send invalid JSON by sending plain text with JSON content-type\n    try:\n        response = requests.post(\n            REGISTER_ENDPOINT,\n            data=\"{'invalid_json': True unquoted_value}\",\n            headers=headers,\n            auth=AUTH,\n            timeout=TIMEOUT,\n        )\n        # Server may respond 400 or 500 depending on implementation\n        assert response.status_code in (400, 500), f\"Expected 400 or 500 for malformed request, got {response.status_code}\"\n    except requests.exceptions.RequestException:\n        # Network or connection error also means test cannot proceed here\n        pass\n\n\ntest_authentication_api_register_endpoint()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-20T04:21:42.921Z",
    "modified": "2025-11-20T04:22:31.200Z"
  },
  {
    "projectId": "e9b8c1d4-8486-4081-b002-5e34e0368c33",
    "testId": "5253e999-948b-4e61-a826-4055c3e8e2d7",
    "userId": "e47874b8-4021-7063-d8d0-6532447644d8",
    "title": "TC003-test_authentication_api_logout_endpoint",
    "description": "Verify that the /api/logout endpoint destroys the current user session, returns 200 on successful logout, and 401 if the user is not authenticated.",
    "code": "import requests\nfrom requests.auth import HTTPBasicAuth\n\nBASE_URL = \"http://localhost/bishwo_calculator\"\nAUTH_USERNAME = \"uniquebishwo@gmail.com\"\nAUTH_PASSWORD = \"c9PU7XAsAADYk_A\"\nTIMEOUT = 30\n\n\ndef test_authentication_api_logout_endpoint():\n    session = requests.Session()\n    login_url = f\"{BASE_URL}/api/login\"\n    logout_url = f\"{BASE_URL}/api/logout\"\n\n    # Login payload using username and password as per API schema\n    login_payload = {\n        \"username\": AUTH_USERNAME,\n        \"password\": AUTH_PASSWORD\n    }\n\n    # Perform login with basic token authentication: Here token means use basic auth to get session + token\n    try:\n        # Login to create authenticated session\n        login_resp = session.post(\n            login_url,\n            json=login_payload,\n            timeout=TIMEOUT\n        )\n        # Assert login success first\n        assert login_resp.status_code == 200, f\"Login failed with status code {login_resp.status_code}\"\n\n        # Authenticated logout request\n        logout_resp = session.get(logout_url, timeout=TIMEOUT)\n\n        # Assert logout success\n        assert logout_resp.status_code == 200, f\"Logout failed with status code {logout_resp.status_code}\"\n\n        # After logout, session should be destroyed. Try logout again with same session expecting 401\n        logout_resp_unauth = session.get(logout_url, timeout=TIMEOUT)\n        assert logout_resp_unauth.status_code == 401, (\n            f\"Expected 401 after logout but got {logout_resp_unauth.status_code}\"\n        )\n\n        # Also test unauthenticated logout request with a fresh session, expect 401\n        fresh_session = requests.Session()\n        logout_resp_noauth = fresh_session.get(logout_url, timeout=TIMEOUT)\n        assert logout_resp_noauth.status_code == 401, (\n            f\"Expected 401 for unauthenticated logout but got {logout_resp_noauth.status_code}\"\n        )\n\n    finally:\n        session.close()\n\ntest_authentication_api_logout_endpoint()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-20T04:21:42.927Z",
    "modified": "2025-11-20T04:22:19.923Z"
  },
  {
    "projectId": "e9b8c1d4-8486-4081-b002-5e34e0368c33",
    "testId": "cf3b6757-5f4e-4a44-836f-f727ee02d97a",
    "userId": "e47874b8-4021-7063-d8d0-6532447644d8",
    "title": "TC004-test_authentication_api_check_username_endpoint",
    "description": "Verify that the /api/check-username endpoint correctly checks username availability and returns suggestions, with 200 on success and 400 on bad request.",
    "code": "import requests\nfrom requests.auth import HTTPBasicAuth\n\nBASE_URL = \"http://localhost/bishwo_calculator\"\nAUTH_USERNAME = \"uniquebishwo@gmail.com\"\nAUTH_PASSWORD = \"c9PU7XAsAADYk_A\"\nTIMEOUT = 30\n\ndef test_authentication_api_check_username_endpoint():\n    url = f\"{BASE_URL}/api/check-username\"\n    headers = {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n    }\n\n    # Test case: valid username availability check (expected 200)\n    valid_payload = {\n        \"username\": \"uniqueusername12345\"\n    }\n    try:\n        response = requests.post(\n            url,\n            json=valid_payload,\n            headers=headers,\n            auth=HTTPBasicAuth(AUTH_USERNAME, AUTH_PASSWORD),\n            timeout=TIMEOUT\n        )\n    except requests.RequestException as e:\n        assert False, f\"Request failed for valid payload: {e}\"\n\n    assert response.status_code == 200, f\"Expected 200, got {response.status_code}\"\n    json_data = response.json()\n    assert \"available\" in json_data or \"suggestions\" in json_data, \"Response missing expected keys\"\n\n    # Test case: bad request check (expected 400)\n    # Send empty payload or missing required fields to provoke 400\n    bad_payload = {}\n    try:\n        response_bad = requests.post(\n            url,\n            json=bad_payload,\n            headers=headers,\n            auth=HTTPBasicAuth(AUTH_USERNAME, AUTH_PASSWORD),\n            timeout=TIMEOUT\n        )\n    except requests.RequestException as e:\n        assert False, f\"Request failed for bad payload: {e}\"\n\n    assert response_bad.status_code == 400, f\"Expected 400, got {response_bad.status_code}\"\n\ntest_authentication_api_check_username_endpoint()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-20T04:21:42.933Z",
    "modified": "2025-11-20T04:22:35.421Z"
  },
  {
    "projectId": "e9b8c1d4-8486-4081-b002-5e34e0368c33",
    "testId": "8184cb2e-1220-46d8-ae3d-2258623d7823",
    "userId": "e47874b8-4021-7063-d8d0-6532447644d8",
    "title": "TC005-test_authentication_api_forgot_password_endpoint",
    "description": "Verify that the /api/forgot-password endpoint initiates password reset process, returns 200 when reset email is enqueued, and 400 if email is missing.",
    "code": "import requests\nfrom requests.auth import HTTPBasicAuth\n\nBASE_URL = \"http://localhost/bishwo_calculator\"\nTIMEOUT = 30\nAUTH = HTTPBasicAuth(\"uniquebishwo@gmail.com\", \"c9PU7XAsAADYk_A\")\n\n\ndef test_authentication_api_forgot_password_endpoint():\n    url = f\"{BASE_URL}/api/forgot-password\"\n    headers = {\n        \"Content-Type\": \"application/json\"\n    }\n\n    # Case 1: Valid email provided - Expect 200\n    valid_payload = {\n        \"email\": \"uniquebishwo@gmail.com\"\n    }\n    try:\n        response = requests.post(url, json=valid_payload, headers=headers, auth=AUTH, timeout=TIMEOUT)\n        assert response.status_code == 200, f\"Expected 200 for valid email, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed for valid email case: {e}\"\n\n    # Case 2: Missing email - Expect 400\n    invalid_payload = {}\n    try:\n        response = requests.post(url, json=invalid_payload, headers=headers, auth=AUTH, timeout=TIMEOUT)\n        assert response.status_code == 400, f\"Expected 400 for missing email, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed for missing email case: {e}\"\n\n\ntest_authentication_api_forgot_password_endpoint()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-20T04:21:42.938Z",
    "modified": "2025-11-20T04:22:24.350Z"
  },
  {
    "projectId": "e9b8c1d4-8486-4081-b002-5e34e0368c33",
    "testId": "c7fe9300-1941-4647-9751-d05e001504b4",
    "userId": "e47874b8-4021-7063-d8d0-6532447644d8",
    "title": "TC006-test_admin_panel_api_dashboard_endpoint",
    "description": "Verify that the /admin endpoint renders the dashboard for authenticated admin users with 200 response, redirects unauthenticated users with 302, and forbids non-admin users with 403.",
    "code": "import requests\nfrom requests.auth import HTTPBasicAuth\n\nBASE_URL = \"http://localhost/bishwo_calculator\"\nAUTH_CREDENTIALS = (\"uniquebishwo@gmail.com\", \"c9PU7XAsAADYk_A\")\nTIMEOUT = 30\n\ndef test_admin_panel_api_dashboard_endpoint():\n    url = f\"{BASE_URL}/admin\"\n\n    # Case 1: Authenticated admin user gets 200\n    try:\n        response = requests.get(url, auth=HTTPBasicAuth(*AUTH_CREDENTIALS), timeout=TIMEOUT, allow_redirects=False)\n        assert response.status_code == 200, f\"Expected 200 for admin user, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed for authenticated admin user: {e}\"\n\n    # Case 2: Unauthenticated user gets 302 redirect\n    try:\n        response = requests.get(url, timeout=TIMEOUT, allow_redirects=False)\n        assert response.status_code == 302, f\"Expected 302 redirect for unauthenticated user, got {response.status_code}\"\n        # Optionally check 'Location' header is present for redirect target\n        assert 'Location' in response.headers, \"Redirect response missing 'Location' header\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed for unauthenticated user: {e}\"\n\n    # Case 3: Authenticated non-admin user gets 403 Forbidden\n    # To simulate non-admin, authenticate with valid user creds but not admin.\n    # Since no test credentials provided for non-admin, simulate by registering a non-admin user,\n    # log in to get token, then use token. Without token authentication, fallback to basic auth with assumed non-admin.\n    # Since no direct API for login token extraction described, we will try with the same password but a different user.\n    # Because no alternative user credentials are provided, we simulate failure by logging in with invalid roles.\n    # So here, let's create a non-admin user via /api/register and then test access.\n    # Wrap creation and deletion in try-finally.\n    register_url = f\"{BASE_URL}/api/register\"\n    login_url = f\"{BASE_URL}/api/login\"\n    non_admin_username = \"testnonadminuser\"\n    non_admin_email = \"testnonadminuser@example.com\"\n    non_admin_password = \"TestPass123!\"\n    non_admin_full_name = \"Test NonAdmin User\"\n    non_admin_roles = []  # No engineer_roles or roles, non-admin\n    headers = {\"Content-Type\": \"application/json\"}\n\n    non_admin_token = None\n    user_created = False\n    try:\n        # Register non-admin user\n        reg_payload = {\n            \"username\": non_admin_username,\n            \"email\": non_admin_email,\n            \"password\": non_admin_password,\n            \"full_name\": non_admin_full_name,\n            \"engineer_roles\": non_admin_roles\n        }\n        reg_resp = requests.post(register_url, json=reg_payload, headers=headers, timeout=TIMEOUT)\n        if reg_resp.status_code == 200:\n            user_created = True\n        else:\n            # If user exists or another failure, continue, maybe user exists\n            user_created = False\n\n        # Login non-admin user to obtain auth token or use session cookie\n        login_payload = {\n            \"username\": non_admin_username,\n            \"password\": non_admin_password\n        }\n        login_resp = requests.post(login_url, json=login_payload, headers=headers, timeout=TIMEOUT)\n        assert login_resp.status_code == 200, f\"Login failed for non-admin user with status {login_resp.status_code}\"\n        # Extract auth cookie or header if any\n        session_cookies = login_resp.cookies\n\n        # Access /admin endpoint with non-admin user session cookies\n        response = requests.get(url, cookies=session_cookies, timeout=TIMEOUT, allow_redirects=False)\n        assert response.status_code == 403, f\"Expected 403 Forbidden for non-admin user, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed for non-admin user: {e}\"\n    finally:\n        # Cleanup: If user was created, ideally delete the user â€” no API provided to delete user,\n        # so this step is skipped due to lack of API.\n        pass\n\ntest_admin_panel_api_dashboard_endpoint()",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 82, in <module>\n  File \"<string>\", line 21, in test_admin_panel_api_dashboard_endpoint\nAssertionError: Expected 302 redirect for unauthenticated user, got 500\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-20T04:21:42.944Z",
    "modified": "2025-11-20T04:23:21.873Z"
  },
  {
    "projectId": "e9b8c1d4-8486-4081-b002-5e34e0368c33",
    "testId": "d98eea03-f288-4398-a7e1-8d45ddd69daf",
    "userId": "e47874b8-4021-7063-d8d0-6532447644d8",
    "title": "TC007-test_admin_panel_api_settings_section_endpoint",
    "description": "Verify that the /admin/settings/{section} endpoint renders the specified settings section for admin users, returns 200 on success, 403 if forbidden, and 404 for unknown section.",
    "code": "import requests\nfrom requests.auth import HTTPBasicAuth\n\nBASE_URL = \"http://localhost/bishwo_calculator\"\nUSERNAME = \"uniquebishwo@gmail.com\"\nPASSWORD = \"c9PU7XAsAADYk_A\"\nTIMEOUT = 30\n\ndef test_admin_panel_api_settings_section_endpoint():\n    auth = HTTPBasicAuth(USERNAME, PASSWORD)\n    headers = {\n        \"Accept\": \"text/html\"\n    }\n\n    valid_sections = [\n        \"general\",\n        \"users\",\n        \"security\",\n        \"email\",\n        \"api\",\n        \"performance\",\n        \"advanced\"\n    ]\n    unknown_section = \"unknown_section_xyz\"\n\n    # Test each valid section returns 200\n    for section in valid_sections:\n        url = f\"{BASE_URL}/admin/settings/{section}\"\n        try:\n            response = requests.get(url, auth=auth, headers=headers, timeout=TIMEOUT)\n        except requests.RequestException as e:\n            assert False, f\"Request to {url} failed with exception: {e}\"\n        assert response.status_code == 200, f\"Expected 200 for section '{section}', got {response.status_code}\"\n\n    # Test unknown section returns 404\n    url_404 = f\"{BASE_URL}/admin/settings/{unknown_section}\"\n    try:\n        response_404 = requests.get(url_404, auth=auth, headers=headers, timeout=TIMEOUT)\n    except requests.RequestException as e:\n        assert False, f\"Request to {url_404} failed with exception: {e}\"\n    assert response_404.status_code == 404, f\"Expected 404 for unknown section, got {response_404.status_code}\"\n\n    # Test forbidden access: Try without auth or with invalid auth\n    url_forbidden = f\"{BASE_URL}/admin/settings/{valid_sections[0]}\"\n    # Without auth\n    try:\n        response_no_auth = requests.get(url_forbidden, headers=headers, timeout=TIMEOUT)\n    except requests.RequestException as e:\n        assert False, f\"Request to {url_forbidden} without auth failed with exception: {e}\"\n    assert response_no_auth.status_code == 403 or response_no_auth.status_code == 401, \\\n        f\"Expected 403 or 401 for no auth, got {response_no_auth.status_code}\"\n\n    # With invalid auth\n    invalid_auth = HTTPBasicAuth(\"invaliduser@example.com\", \"wrongpassword\")\n    try:\n        response_invalid_auth = requests.get(url_forbidden, auth=invalid_auth, headers=headers, timeout=TIMEOUT)\n    except requests.RequestException as e:\n        assert False, f\"Request to {url_forbidden} with invalid auth failed with exception: {e}\"\n    assert response_invalid_auth.status_code == 403 or response_invalid_auth.status_code == 401, \\\n        f\"Expected 403 or 401 for invalid auth, got {response_invalid_auth.status_code}\"\n\ntest_admin_panel_api_settings_section_endpoint()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 62, in <module>\n  File \"<string>\", line 50, in test_admin_panel_api_settings_section_endpoint\nAssertionError: Expected 403 or 401 for no auth, got 500\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-20T04:21:42.950Z",
    "modified": "2025-11-20T04:24:02.834Z"
  },
  {
    "projectId": "e9b8c1d4-8486-4081-b002-5e34e0368c33",
    "testId": "a957aa91-7233-4498-9dce-5a867a00308a",
    "userId": "e47874b8-4021-7063-d8d0-6532447644d8",
    "title": "TC008-test_calculator_api_execute_calculation_endpoint",
    "description": "Verify that the /calculator/{module}/{function} endpoint executes calculation routines with valid input values, returns 200 with result payload, 400 on validation error, and 404 if the calculator is unknown.",
    "code": "import requests\nfrom requests.auth import HTTPBasicAuth\n\nBASE_URL = \"http://localhost/bishwo_calculator\"\nUSERNAME = \"uniquebishwo@gmail.com\"\nPASSWORD = \"c9PU7XAsAADYk_A\"\nTIMEOUT = 30\nauth = HTTPBasicAuth(USERNAME, PASSWORD)\n\ndef test_calculator_api_execute_calculation_endpoint():\n    # Use an example known module and function with valid input_values\n    module = \"electrical\"\n    function = \"ohms_law\"  # changed from 'resistance' to a more likely existing function\n    url = f\"{BASE_URL}/calculator/{module}/{function}\"\n    \n    # Prepare a valid payload\n    valid_payload = {\n        \"input_values\": {\n            \"voltage\": 100,\n            \"current\": 5\n        }\n    }\n    \n    headers = {\n        \"Content-Type\": \"application/json\"\n    }\n\n    # 1) Test successful execution (200)\n    try:\n        response = requests.post(url, json=valid_payload, auth=auth, headers=headers, timeout=TIMEOUT)\n        assert response.status_code == 200, f\"Expected 200 OK but got {response.status_code}\"\n        result_json = response.json()\n        # The response must be a JSON object and non-empty\n        assert isinstance(result_json, dict), \"Response is not JSON object\"\n        assert len(result_json) > 0, \"Result payload is empty\"\n    except Exception as e:\n        raise AssertionError(f\"Failed on valid input test: {str(e)}\")\n    \n    # 2) Test validation error (400) with invalid payload (non-number input)\n    invalid_payload = {\"input_values\": {\"voltage\": \"not_a_number\", \"current\": -5}}\n    try:\n        response = requests.post(url, json=invalid_payload, auth=auth, headers=headers, timeout=TIMEOUT)\n        assert response.status_code == 400, f\"Expected 400 Bad Request but got {response.status_code}\"\n    except Exception as e:\n        raise AssertionError(f\"Failed on validation error test: {str(e)}\")\n\n    # 3) Test unknown calculator (404)\n    unknown_module = \"unknown_module_xyz\"\n    unknown_function = \"unknown_function_abc\"\n    url_404 = f\"{BASE_URL}/calculator/{unknown_module}/{unknown_function}\"\n    try:\n        response = requests.post(url_404, json=valid_payload, auth=auth, headers=headers, timeout=TIMEOUT)\n        assert response.status_code == 404, f\"Expected 404 Not Found but got {response.status_code}\"\n    except Exception as e:\n        raise AssertionError(f\"Failed on unknown calculator test: {str(e)}\")\n\ntest_calculator_api_execute_calculation_endpoint()\n",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-20T04:21:42.956Z",
    "modified": "2025-11-20T04:24:00.249Z"
  },
  {
    "projectId": "e9b8c1d4-8486-4081-b002-5e34e0368c33",
    "testId": "ecf8034b-895a-4c0d-991f-f589f552d6b9",
    "userId": "e47874b8-4021-7063-d8d0-6532447644d8",
    "title": "TC009-test_user_profile_api_update_profile_endpoint",
    "description": "Verify that the /profile PUT endpoint updates user profile fields correctly, returns 200 on success, 400 on validation error, and 401 if unauthorized.",
    "code": "import requests\nfrom requests.auth import HTTPBasicAuth\n\nBASE_URL = \"http://localhost/bishwo_calculator\"\nAUTH = HTTPBasicAuth(\"uniquebishwo@gmail.com\", \"c9PU7XAsAADYk_A\")\nTIMEOUT = 30\n\ndef test_user_profile_api_update_profile_endpoint():\n    url = f\"{BASE_URL}/profile\"\n    headers = {\"Content-Type\": \"application/json\"}\n\n    # Valid update payload\n    valid_payload = {\n        \"first_name\": \"TestFirst\",\n        \"last_name\": \"TestLast\",\n        \"company\": \"TestCompany\",\n        \"bio\": \"This is a test bio.\"\n    }\n\n    # Invalid update payload: e.g. first_name as integer instead of string (validation error)\n    invalid_payload = {\n        \"first_name\": 123,\n        \"last_name\": \"Last\",\n        \"company\": \"Company\",\n        \"bio\": \"Bio\"\n    }\n\n    # 1. Test successful update returns 200\n    try:\n        resp = requests.put(url, json=valid_payload, auth=AUTH, headers=headers, timeout=TIMEOUT)\n        assert resp.status_code == 200, f\"Expected 200 OK for valid update but got {resp.status_code}\"\n        # Optionally assert response content if detail is provided\n        json_resp = resp.json()\n        # Check response contains updated fields or confirmation\n        for k, v in valid_payload.items():\n            assert k in json_resp, f\"Response JSON missing expected key '{k}'\"\n            assert json_resp[k] == v, f\"Response JSON field '{k}' expected '{v}' but got '{json_resp[k]}'\"\n    except requests.RequestException as e:\n        assert False, f\"Request exception during valid update test: {e}\"\n\n    # 2. Test validation error returns 400\n    try:\n        resp = requests.put(url, json=invalid_payload, auth=AUTH, headers=headers, timeout=TIMEOUT)\n        assert resp.status_code == 400, f\"Expected 400 Bad Request for invalid update but got {resp.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request exception during invalid update test: {e}\"\n\n    # 3. Test unauthorized access returns 401\n    try:\n        resp = requests.put(url, json=valid_payload, headers=headers, timeout=TIMEOUT)  # no auth\n        assert resp.status_code == 401, f\"Expected 401 Unauthorized for no auth but got {resp.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request exception during unauthorized update test: {e}\"\n\ntest_user_profile_api_update_profile_endpoint()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-20T04:21:42.962Z",
    "modified": "2025-11-20T04:23:09.283Z"
  },
  {
    "projectId": "e9b8c1d4-8486-4081-b002-5e34e0368c33",
    "testId": "04e0046e-b553-4881-9648-7c5db447c537",
    "userId": "e47874b8-4021-7063-d8d0-6532447644d8",
    "title": "TC010-test_payment_api_process_payment_endpoint",
    "description": "Verify that the /payment POST endpoint processes payment intents with required amount, currency, and payment_method, returns 200 on success, and 400 on validation error.",
    "code": "import requests\nfrom requests.auth import HTTPBasicAuth\n\nBASE_URL = \"http://localhost/bishwo_calculator\"\nAUTH = HTTPBasicAuth(\"uniquebishwo@gmail.com\", \"c9PU7XAsAADYk_A\")\nTIMEOUT = 30\n\ndef test_payment_api_process_payment_endpoint():\n    url = f\"{BASE_URL}/payment\"\n    headers = {\n        \"Content-Type\": \"application/json\"\n    }\n\n    # Test valid payment intent (expected 200)\n    valid_payload = {\n        \"amount\": 100.50,\n        \"currency\": \"USD\",\n        \"payment_method\": \"credit_card\"\n    }\n    try:\n        response = requests.post(url, json=valid_payload, headers=headers, auth=AUTH, timeout=TIMEOUT)\n        assert response.status_code == 200, f\"Expected 200 for valid payment, got {response.status_code}\"\n        # Validate response content is as expected - at least JSON and possibly success message or payment id\n        try:\n            data = response.json()\n            assert isinstance(data, dict), \"Response JSON should be an object\"\n            # Could add more validation if response schema known\n        except Exception:\n            assert False, \"Response is not valid JSON on valid payment\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed for valid payment intent: {e}\"\n\n    # Test payment with missing amount (expected 400)\n    invalid_payload_missing_amount = {\n        # \"amount\" missing\n        \"currency\": \"USD\",\n        \"payment_method\": \"credit_card\"\n    }\n    try:\n        response = requests.post(url, json=invalid_payload_missing_amount, headers=headers, auth=AUTH, timeout=TIMEOUT)\n        assert response.status_code == 400, f\"Expected 400 for missing amount, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed for missing amount test: {e}\"\n\n    # Test payment with missing currency (expected 400)\n    invalid_payload_missing_currency = {\n        \"amount\": 50,\n        # \"currency\" missing\n        \"payment_method\": \"paypal\"\n    }\n    try:\n        response = requests.post(url, json=invalid_payload_missing_currency, headers=headers, auth=AUTH, timeout=TIMEOUT)\n        assert response.status_code == 400, f\"Expected 400 for missing currency, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed for missing currency test: {e}\"\n\n    # Test payment with missing payment_method (expected 400)\n    invalid_payload_missing_payment_method = {\n        \"amount\": 70,\n        \"currency\": \"EUR\"\n        # \"payment_method\" missing\n    }\n    try:\n        response = requests.post(url, json=invalid_payload_missing_payment_method, headers=headers, auth=AUTH, timeout=TIMEOUT)\n        assert response.status_code == 400, f\"Expected 400 for missing payment_method, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed for missing payment_method test: {e}\"\n\ntest_payment_api_process_payment_endpoint()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-20T04:21:42.968Z",
    "modified": "2025-11-20T04:23:19.079Z"
  }
]
