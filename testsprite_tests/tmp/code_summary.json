{
  "tech_stack": [
    "PHP 8.x",
    "Custom MVC framework (FastRoute router)",
    "Composer autoloading",
    "MySQL / MariaDB",
    "Twig-inspired view layer",
    "Vanilla JS + Fetch API",
    "Session & cookie authentication",
    "REST-style JSON endpoints"
  ],
  "features": [
    {
      "name": "Authentication API",
      "description": "Endpoints that perform login/logout, username checks, remember-me session creation, and password reset flows.",
      "files": [
        "app/Controllers/Api/AuthController.php",
        "app/Core/Auth.php",
        "app/Models/User.php",
        "app/Middleware/AuthMiddleware.php"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Authentication API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/login": {
            "post": {
              "summary": "Authenticate using username or email plus password.",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "username_email": {"type": "string"},
                        "password": {"type": "string"},
                        "remember_me": {"type": "boolean"}
                      },
                      "required": ["username_email", "password"]
                    }
                  }
                }
              },
              "responses": {
                "200": {"description": "Login success payload with session + auth token."},
                "400": {"description": "Missing credentials."},
                "401": {"description": "Invalid username or password."}
              }
            }
          },
          "/api/logout": {
            "get": {
              "summary": "Destroy active session and auth token.",
              "responses": {
                "200": {"description": "Logout confirmed."},
                "401": {"description": "User is not authenticated."}
              }
            }
          },
          "/api/check-username": {
            "post": {
              "summary": "Check username availability for registration UI.",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "username": {"type": "string"}
                      },
                      "required": ["username"]
                    }
                  }
                }
              },
              "responses": {
                "200": {"description": "Availability + suggestion payload."},
                "400": {"description": "Invalid input."}
              }
            }
          },
          "/api/forgot-password": {
            "post": {
              "summary": "Trigger password reset email dispatch.",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "email": {"type": "string", "format": "email"}
                      },
                      "required": ["email"]
                    }
                  }
                }
              },
              "responses": {
                "200": {"description": "Reset email queued."},
                "404": {"description": "Account not found."}
              }
            }
          }
        }
      }
    },
    {
      "name": "Registration & Profile Service",
      "description": "User creation, onboarding preferences, and authenticated profile management (view/update, avatar).",
      "files": [
        "app/Controllers/Api/AuthController.php",
        "app/Controllers/ProfileController.php",
        "app/Controllers/ProfileImageController.php",
        "app/Models/User.php"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Registration & Profile API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/register": {
            "post": {
              "summary": "Register a new Bishwo Calculator user.",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "username": {"type": "string"},
                        "email": {"type": "string", "format": "email"},
                        "password": {"type": "string", "minLength": 8},
                        "first_name": {"type": "string"},
                        "last_name": {"type": "string"},
                        "terms_agree": {"type": "boolean"}
                      },
                      "required": ["username", "email", "password"]
                    }
                  }
                }
              },
              "responses": {
                "200": {"description": "User created and ID returned."},
                "400": {"description": "Validation failure."},
                "409": {"description": "Username or email already exists."}
              }
            }
          },
          "/profile": {
            "get": {
              "summary": "Retrieve profile for current session user.",
              "responses": {
                "200": {"description": "Profile payload."},
                "401": {"description": "Session required."}
              }
            },
            "put": {
              "summary": "Update profile info and preferences.",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "first_name": {"type": "string"},
                        "last_name": {"type": "string"},
                        "company": {"type": "string"},
                        "phone": {"type": "string"}
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {"description": "Profile updated."},
                "400": {"description": "Validation error."},
                "401": {"description": "Unauthorized."}
              }
            }
          }
        }
      }
    },
    {
      "name": "Admin Panel & Access Control",
      "description": "Server-rendered admin dashboard, configuration panels, and middleware enforcing admin-only routes.",
      "files": [
        "app/Controllers/Admin/MainDashboardController.php",
        "app/Controllers/Admin/SettingsController.php",
        "app/Controllers/Admin/UserManagementController.php",
        "app/Middleware/AdminMiddleware.php",
        "app/routes.php"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Admin Panel API",
          "version": "1.0.0"
        },
        "paths": {
          "/admin": {
            "get": {
              "summary": "Render dashboard overview.",
              "responses": {
                "200": {"description": "HTML dashboard."},
                "302": {"description": "Redirect to login when not authenticated."},
                "403": {"description": "Forbidden for non-admins."}
              }
            }
          },
          "/admin/settings/{section}": {
            "get": {
              "summary": "Return the requested settings section UI.",
              "parameters": [
                {
                  "name": "section",
                  "in": "path",
                  "required": true,
                  "schema": {
                    "type": "string",
                    "enum": ["general", "users", "security", "email", "advanced"]
                  }
                }
              ],
              "responses": {
                "200": {"description": "Section HTML rendered."},
                "404": {"description": "Section not found."}
              }
            }
          },
          "/admin/users": {
            "get": {
              "summary": "List and manage registered users.",
              "responses": {
                "200": {"description": "User management table."},
                "403": {"description": "Forbidden."}
              }
            }
          }
        }
      }
    },
    {
      "name": "Calculator Engine API",
      "description": "Modular calculators (electrical, civil, fire, etc.) with REST endpoints to list calculators and execute formulas.",
      "files": [
        "app/Controllers/CalculatorController.php",
        "app/Core/CalculatorEngine.php",
        "modules/electrical/",
        "modules/civil/",
        "modules/fire/"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Calculator API",
          "version": "1.0.0"
        },
        "paths": {
          "/calculators": {
            "get": {
              "summary": "Return categorized calculator definitions.",
              "responses": {
                "200": {"description": "JSON array of calculators."}
              }
            }
          },
          "/calculator/{module}/{function}": {
            "post": {
              "summary": "Execute a calculator function with numeric inputs.",
              "parameters": [
                {"name": "module", "in": "path", "required": true, "schema": {"type": "string"}},
                {"name": "function", "in": "path", "required": true, "schema": {"type": "string"}}
              ],
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "inputs": {
                          "type": "object",
                          "additionalProperties": {"type": "number"}
                        }
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {"description": "Computation result payload."},
                "400": {"description": "Invalid input or validation error."},
                "404": {"description": "Unknown module or function."}
              }
            }
          }
        }
      }
    },
    {
      "name": "Theme & Plugin Management",
      "description": "Admin tooling to list/activate themes, customize branding, and toggle plugin modules at runtime.",
      "files": [
        "app/Controllers/Admin/ThemeController.php",
        "app/Controllers/Admin/ThemeCustomizeController.php",
        "app/Controllers/Admin/PluginController.php",
        "app/Services/ThemeBuilder.php",
        "app/Services/PluginManager.php"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Theme & Plugin API",
          "version": "1.0.0"
        },
        "paths": {
          "/admin/themes": {
            "get": {
              "summary": "List installed themes and active status.",
              "responses": {
                "200": {"description": "Theme list."},
                "403": {"description": "Forbidden."}
              }
            }
          },
          "/admin/themes/{theme}/activate": {
            "post": {
              "summary": "Activate selected theme.",
              "parameters": [
                {"name": "theme", "in": "path", "required": true, "schema": {"type": "string"}}
              ],
              "responses": {
                "200": {"description": "Theme activated."},
                "404": {"description": "Theme missing."}
              }
            }
          },
          "/admin/plugins": {
            "get": {
              "summary": "List installed plugins with status.",
              "responses": {
                "200": {"description": "Plugin list."}
              }
            }
          },
          "/admin/plugins/toggle": {
            "post": {
              "summary": "Activate or deactivate a plugin.",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "plugin": {"type": "string"},
                        "action": {"type": "string", "enum": ["activate", "deactivate"]}
                      },
                      "required": ["plugin", "action"]
                    }
                  }
                }
              },
              "responses": {
                "200": {"description": "Plugin state updated."},
                "400": {"description": "Invalid payload."}
              }
            }
          }
        }
      }
    }
  ]
}