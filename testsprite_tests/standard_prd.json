{
  "meta": {
    "project": "Bishwo_Calculator",
    "date": "2025-11-04",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "Bishwo Calculator is a modular, themeable web application primarily designed for service providers in Civil, Electrical, and HVAC fields. It offers dynamic calculator tools accessible to users through a clean interface, with extensive admin capabilities for managing themes, plugins, backups, and audit logs.",
  "core_goals": [
    "Provide a user-friendly interface for accessing specialized calculators.",
    "Allow administrators to manage themes with preview, activation, validation, backup, and customization features.",
    "Enable plugin management including upload, activation toggle, deletion, and manifest validation.",
    "Support modular service providers with dynamic navigation to relevant tools.",
    "Implement secure and reliable backup and restore functionality for system state and data.",
    "Maintain system integrity with logging, audit trails, rate limiting, and security features such as CSRF protection.",
    "Expose a stable API for health checks, calculators, and history retrieval."
  ],
  "key_features": [
    "Dynamic calculator navigation and usage through dropdowns on the user home page.",
    "Theme management capabilities: install, activate, validate, preview, backup, and customize with dynamic CSS application.",
    "Plugin management: upload new plugins, toggle activation, delete, refresh, and manifest validation to ensure compatibility.",
    "Support for service provider modules with dedicated navigation: Civil, Electrical, and HVAC.",
    "Comprehensive backup and restore system including database dumps and assets for full system recovery.",
    "Audit log viewer with sophisticated filtering and download options for transparency and compliance.",
    "Secure administrative POST routes protected by rate limiting and CSRF tokens.",
    "Structured logging for both general events and audit-specific records.",
    "API v1 endpoints providing calculators, health status, and history data in JSON format."
  ],
  "user_flow_summary": [
    "User visits the home page, uses a dynamic dropdown menu to select and open a calculator for a relevant service module.",
    "Administrator accesses the theme management section at /admin/themes to upload a new theme, perform validation checks, activate the theme, customize settings, and verifies that dynamic CSS is applied correctly on the front end.",
    "Administrator navigates to the backup and restore area at /admin/help to create backups, export system data, restore from backups, and download backup files.",
    "Administrator reviews audit logs by visiting /admin/audit-logs, applies filters based on criteria, and downloads log files as needed.",
    "API consumers request the /api/v1/health endpoint and receive a 200 OK JSON response to confirm system availability."
  ],
  "validation_criteria": [
    "User calculator navigation and display works consistently without errors.",
    "Theme uploads are verified against validation rules and activate dynamic styling correctly.",
    "Plugin uploads and toggling follow manifest validation with no system errors.",
    "Backup files include complete database dumps and relevant theme/plugin data, and restores return the system to the exact previous state.",
    "Audit log viewer correctly filters logs and downloads the selected entries without corruption.",
    "Admin POST routes enforce rate limiting and CSRF protection as intended.",
    "System logs are structured and include necessary events for audits.",
    "API endpoints return correct status codes and data formats, with health endpoint reliably responding 200 JSON."
  ],
  "code_summary": {
    "project": "Bishwo_Calculator",
    "stack": {
      "language": "php",
      "framework": "custom MVC",
      "views": "PHP templates under themes/<active>/views",
      "assets": "public/assets/themes/<active> and themes/<active>/assets",
      "db": "PDO via includes/db.php",
      "routing": "app/routes.php with custom Router"
    },
    "features": [
      "Themes: install, activate, validate, preview, backups, settings",
      "Plugins: upload, toggle, delete, details, refresh, plugin manifest validation",
      "Modules: service providers (Civil, Electrical, HVAC) + module navigation",
      "API v1: calculators, health endpoints, history",
      "Backup/Restore: full system backup with db.sql + themes/plugins",
      "Audit Log viewer with filters & download",
      "Rate limiting + CSRF on admin POST routes",
      "Logger + AuditLogger for structured logs"
    ],
    "key_paths": {
      "routes": "app/routes.php",
      "theme_manager": "app/Services/ThemeManager.php",
      "theme_views": "themes/default/views",
      "admin_theme_ui": "app/Views/admin/themes/index.php",
      "plugin_manager": "app/Services/PluginManager.php",
      "controllers": "app/Controllers/*"
    },
    "critical_flows": [
      "User: Home -> Navigate calculators via dynamic dropdown -> Open calculator page",
      "Admin: /admin/themes -> Upload -> Validate -> Activate -> Customize settings -> Verify dynamic CSS applied",
      "Admin: /admin/help -> Backup/Export/Restore -> Download artifacts",
      "Admin: /admin/audit-logs -> Filter & download",
      "API v1: /api/v1/health -> 200 JSON"
    ]
  }
}
