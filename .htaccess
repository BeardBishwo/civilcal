# Set default directory index
DirectoryIndex index.php

# MIME Types for proper asset loading
<IfModule mod_mime.c>
    AddType text/css .css
    AddType application/javascript .js
    AddType image/png .png
    AddType image/jpeg .jpg .jpeg
    AddType image/gif .gif
    AddType image/svg+xml .svg
    AddType font/woff .woff
    AddType font/woff2 .woff2
    AddType font/truetype .ttf
    AddType font/opentype .otf
    AddType image/x-icon .ico
</IfModule>

# Security: Block access to sensitive directories and files
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# Block access to sensitive directories
RedirectMatch 403 ^/(app|config|database|storage|vendor|tests)/.*$

<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Automatically detect the base path (works in subdirectories)
    RewriteBase /Bishwo_Calculator/
    
    # Serve existing files and directories directly (no rewriting)
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
    
    # Route non-existing files/dirs through index.php
    RewriteRule ^(.*)$ index.php?url=$1 [L,QSA]
</IfModule>