CREATE TABLE `quiz_questions` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `unique_code` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Admin reference code',
  `topic_id` int unsigned DEFAULT NULL,
  `course_id` int DEFAULT NULL,
  `edu_level_id` int DEFAULT NULL,
  `type` enum('MCQ','TF','MULTI','ORDER','NUMERICAL','TEXT') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'MCQ',
  `content` json NOT NULL COMMENT 'Contains question text, images, LaTeX',
  `content_hash` char(64) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `options` json DEFAULT NULL COMMENT 'Array of options with is_correct flag',
  `correct_answer_json` json DEFAULT NULL,
  `answer_explanation` longtext COLLATE utf8mb4_unicode_ci,
  `difficulty_level` tinyint(1) DEFAULT '3' COMMENT '1=Easy, 5=Hard',
  `default_marks` decimal(5,2) DEFAULT '1.00',
  `default_negative_marks` decimal(5,2) DEFAULT '0.00',
  `tags` json DEFAULT NULL,
  `is_active` tinyint(1) DEFAULT '1',
  `created_by` int unsigned DEFAULT NULL,
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `target_audience` enum('universal','psc_only','world_only') COLLATE utf8mb4_unicode_ci DEFAULT 'universal',
  `subject_id` int DEFAULT NULL,
  `category_id` int DEFAULT NULL,
  `sub_category_id` int DEFAULT NULL,
  `status` enum('draft','approved','archived') COLLATE utf8mb4_unicode_ci DEFAULT 'approved',
  PRIMARY KEY (`id`),
  KEY `unique_code` (`unique_code`),
  KEY `topic_id` (`topic_id`),
  KEY `idx_content_hash` (`content_hash`),
  CONSTRAINT `fk_quiz_questions_topic` FOREIGN KEY (`topic_id`) REFERENCES `quiz_topics` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=89 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci